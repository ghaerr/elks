<HTML>
<Head>

<Title>ELKS FAQ: English</Title>

<Meta Name="description" Description="A port of Linux for 16-bit Intel architectures">
<Meta Name="keywords" Keywords="Linux,linux-86,linux-8086,16-bit,UNIX,ELKS">

</Head>
<Body BGColor=White Text=Black Link=Blue VLink=Magenta ALink=Red>

<Table Border=0 Width=100%>

<TR>
<TD Width=20% Align=Left VAlign=Top><Img Src="../Images/ELKStag.gif"
Alt="ELKS Logo" Height=77 Width=224></TD>
<TD Width=70% Align=Center VAlign=Center><Font Size=+2>ELKS FAQ -
English</Font></TD>
<TD Width=10% Align=Right VAlign=Top><Img Src="../Images/ELKSlogo.gif"
Alt="Baby Linux Logo" Height=76 Width=64></TD>
</TR>

</Table>

<P Align=Center>|
<A HRef="../CHANGELOG.txt">Website History</A> |
<A HRef="../download/">Download</A> |
FAQ |
<A HRef="../history/">History</A> |
<A HRef="../lists/">Mailing Lists</A> |
<A HRef="../news/">News</A> |
<A HRef="../releases.html">Releases</A> |
<A HRef="../">Home</A> |
</P>

<HR Width=90%>

<P Align=Justify>This a list of answers to Frequently Asked Questions
about ELKS, also known as Linux-8086.</P>

<P Align=Justify>Note that ELKS is not Linux, and the mailing list is
<I>not</I> a suitable place for posting questions about Linux (despite its
name). These would be better sent to one of the Linux-specific newsgroups
such as <A HRef="news:comp.os.linux.misc">comp.os.linux.misc</A> or
similar.</P>

<HR Width=90%>

<OL>

<LI><H2 Align=Justify><A HRef="#1">General</A></H2>

<OL>

<LI><P Align=Justify><A HRef="#1.1">What is ELKS ?</A></P>

<LI><P Align=Justify><A HRef="#1.2">How does ELKS compare with standard
Linux ?</A></P>

<LI><P Align=Justify><A HRef="#1.3">Are there any ready-to-run
distributions of ELKS ?</A></P>

<LI><P ALign=Justify><A HRef="#1.4">Can ELKS run on an 8088 ?</A></P>

<LI><P Align=Justify><A HRef="#1.5">What about the 80188 and 80186
processors ?</A></P>

<LI><P Align=Justify><A HRef="#1.6">What about the NEC V20 and V30
processors ?</A></P>

</OL>

<LI><H2 Align=Justify><A HRef="#2">Compiling and installing</A></H2>

<OL>

<LI><P Align=Justify><A HRef="#2.1">Where can I find the source for ELKS
?</A></P>

<LI><P Align=Justify><A HRef="#2.2">How do I make an ELKS kernel ?</A></P>

<LI><P Align=Justify><A HRef="#2.3">I get an error saying that
/usr/include/linux/vm86.h does not exist</A> ?</P>

<LI><P Align=Justify><A HRef="#2.4">How do I make an 'init' for ELKS
?</A></P>

<LI><P Align=Justify><A HRef="#2.5">How do I make a root filesystem disk
?</A></P>

<LI><P Align=Justify><A HRef="#2.6">What if I have an XT with a 360K disk
drive ?</A></P>

<LI><P Align=Justify><A HRef="#2.7">How do a change root device of boot
images ?</A></P>

<LI><P Align=Justify><A HRef="#2.8">How do I install to a hard drive
?</A></P>

<LI><P Align=Justify><A HRef="#2.9">I get errors building Dev86 on recent
Linux systems ?</A></P>

<LI><P Align=Justify><A HRef="#2.10">I get errors building elkscmd
?</A></P>

<LI><P Align=Justify><A HRef="#2.11">I get warnings building elkscmd
?</A></P>

</OL>

<LI><H2 Align=Justify><A HRef="#3">Using ELKS</A></H2>

<UL>

<LI><P Align=Justify><A HRef="#3.1">Can I run bcc binaries under Linux
?</A></P>

<LI><P Align=Justify><A HRef="#3.2">Can I boot ELKS under DOSEMU ?</A></P>

</OL>

<LI><H2 Align=Justify><A HRef="#4">Contributing to ELKS</A></H2>

<OL>

<LI><P Align=Justify><A HRef="#4.1">Can I contribute to the ELKS project
?</A></P>

<LI><P ALign=Justify><A HRef="#4.2">What needs to be done ?</A></P>

<LI><P Align=Justify><A HRef="#4.3">What is CVS ?</A></P>

<LI><P Align=Justify><A HRef="#4.4">Where do I get CVS from ?</A></P>

<LI><P Align=Justify><A HRef="#4.5">How do I use CVS without an account
?</A></P>

</OL>

<LI><H2 Align=Justify><A HRef="#5">Unanswered questions</A></H2>

<OL>

<LI><P Align=Justify><A HRef="#5.1">Can I start ELKS from DOS, like
LOADLIN.EXE does for Linux ?</A></P>

<LI><P Align=Justify><A HRef="#5.2">My palmtop has a RAMdrive. Can ELKS
access it ?</A> <I>(When/if ELKS gets an msdos filesystem, that
is)</I></P>

<LI><P Align=Justify><A HRef="#5.3">Can I combine the boot and root
floppies ?</A></P>

</OL>

</OL>

<HR Width=90%>

<A Name="1"><H3>Section 1 - General</H3>

<A Name="1.1"><H4>Q1.1. What is ELKS?</H4>

<P Align=Justify>ELKS is the Embeddable Linux Kernel Subset, a project to
build a small kernel subset of Linux (which will provide more or less UNIX
V7 functionality within the kernel) that can run on machines with limited
processor and memory resources. More information on the background, goals
and current status of the project can be found at the
<A HRef="http://elks.sf.net/">ELKS home page</A>.</P>

<P Align=Justify>The initial proposed targets are the Intel 8086 and
eventually the 286's 16-bit protected mode. A kernel that can run on this
kind of hardware is useful for embedded systems projects, for third world
deployment where 80x86 x&gt;0 machines are not easily available, and for
use on various palmtops.</P>

<A Name="1.2"><H4>Q1.2. How does ELKS compare with standard Linux?</H4>

<P Align=Justify>ELKS is intended to be a subset of true Linux, and ought
to be small enough to be understood by one person, so it should be
invaluable as a learning tool. It is in the <I>very</I> early stages of
development, and big chunks are missing, such as swapping and shared
libraries.</P>

<P Align=Justify>Having said that, it is already able to boot, provide
virtual consoles, mount a root minix filesystems floppy, provide basic
serial and parallel I/O, connect to another computer over a null-modem
SLIP link, and start various small programs.</P>

<A Name="1.3"><H4>Q1.3. Are there any ready-to-run distributions of
ELKS?</H4>

<P Align=Justify>Not yet. You need to use a standard Linux machine, download the
sources, and cross-compile to generate the 8086 target code. 
Boot and root disk images are provided with the current version of ELKS, 
but all they do is act as a platform for testing the system, and
very little can be done with them.</P>

<P Align=Justify><A HRef="MailTo:mstrates@linloft.apana.org.au">Michael
Strates</A> has volunteered to put together a distribution, which he is
currently working on.</P>

<A Name="1.4"><H4>Q1.4. Can ELKS run on an 8088?</H4>

<P Align=Justify>The 8088 is identical to the 8086, except it has an 8-bit
external data bus instead of 16-bit (and thus is slower). So yes, ELKS
will run on it.</P>

<A Name="1.5"><H4>Q1.5. What about the 80188 and 80186 processors?</H4>

<P Align=Justify>These are simply high-integration versions of the 8088
and 8086 respectively, so yes, ELKS will run on them.</P>

<A Name="1.6"><H4>Q1.6. What about the NEC V20 and V30 processors?</H4>

<P Align=Justify>From a software viewpoint, these are simply 8088 and 8086
processors respectively, with the sole exception that the AAD instruction
can not be used with bases other than decimal on the V20 and V30, whereas
it can be used with other bases on the 8088 and 8086 processors. This
difference will not prevent ELKS from running on these processors, and it
is believed that the kernel is not affected by this difference, but user
reports would be appreciated.</P>

<HR Width=90%>

<A NAME="2"><H3>Section 2 - Compiling and Installing</H3>

<A NAME="2.1"><H4>Q2.1. Where can I find the source?</H4>

<P>The primary site 
<A HREF="ftp://linux.mit.edu/pub/ELKS">ftp://linux.mit.edu/pub/ELKS</A>
is now back up.</P>

<P>The primary site for Dev86 is
<A href="http://www.cix.co.uk/~mayday/">http://www.cix.co.uk/~mayday/</A>
which is the best place to find the latest version.</P>

<P Align=Justify>Other sites where ELKS and Dev86 can be found are:</P>

<UL>

<LI><A HRef="ftp://ftp.ecs.soton.ac.uk/pub/elks/">
ftp://ftp.ecs.soton.ac.uk/pub/elks/</A>

<LI><A HRef="ftp://cam053212.student.utwente.nl/pub/8086-nix/ELKS/">
ftp://cam053212.student.utwente.nl/pub/8086-nix/ELKS/</A><BR>

<LI><A HRef="ftp://tsx-11.mit.edu/pub/linux/ALPHA/linux-16/">
ftp://tsx-11.mit.edu/pub/linux/ALPHA/linux-16/</A><BR>

<LI><A HRef="ftp://src.doc.ic.ac.uk/packages/linux/tsx-11-mirror/ALPHA/linux-16/">
ftp://src.doc.ic.ac.uk/packages/linux/tsx-11-mirror/ALPHA/linux-16/</A><BR>

<LI><A HRef="ftp://ftp.amscons.com/pub/mirrors/ELKS">
ftp://ftp.amscons.com/pubi/mirrors/ELKS</A><BR>

<LI><A HRef="ftp://mirror.aarnet.edu.au/pub/linux/elks/">
ftp://mirror.aarnet.edu.au/pub/linux/elks/</A>

</UL>

<P Align=Justify>If you know of any others or wish to set one up, please
contact the maintainer.</P>

<A Name="2.2"><H4>Q2.2. How do I make an ELKS kernel?</H4>

<P Align=Justify>Recent releases contain a conmpiled binary kernel which
most people whould be able to use for initial testing. You should only
need to compile your own if you wish to modify the kernel, or change the
configuration options. The file boot in images.zip can be written to
floppy with dd or RAWRITE.EXE to make a kernel boot disk.</P>

<P Align=Justify>If you want to compile your own kernel, download
<TT>dev86/Dev86-0.0.13.4.tar.gz</TT> and
<TT>kernel/elks-0.0.67/elks-0.0.67.tar.gz</TT> (or the latest versions)
from linux.mit.edu, or one of the other sites. Unpack Dev86 them into
/usr/src (or any other convenient directory), and elks into
/usr/src/linux-86 then do...</P>

<Pre>
	tar -xvzf Dev86-0.0.13.tar.gz -C /usr/src
	tar -xvzf elks-0.0.67.tar.gz -C /usr/src
</Pre>

<P Align=Justify>The development environment will be created in
/usr/src/linux-86, and the kernel source in /usr/src/elks. Next you have
to build the development tools, which include the <B>bcc</B> compiler:</P>

<Pre>
	cd /usr/src/linux-86
	make install
</Pre>

<P Align=Justify>Next, compile the kernel:</P>

<Pre>
	cd /usr/src/elks
	# Build kernel
	make config
	make dep
	make
</Pre>

<P Align=Justify>Make config works in the same way as the main Linux
kernel. The default configuration will work on almost all systems. Don't
change any of the options unless you know what you are doing.</P>

<P Align=Justify>(If you're used to building Linux kernels with gcc,
you'll be amazed at how quick this is! :-) The result is a floppy disk
image called "Image", which you can copy to a formatted floppy and boot
from.</P>

<Pre>
	dd if=Image of=/dev/fd0
</Pre>

<P Align=Justify>or</P>

<Pre>
	make disk
</Pre>

<P Align=Justify>You should now be able to boot with this disk, but you
won't get much further without a root floppy disk for it to mount. You can
either use the image file root provided in images.zip, or make your own.
You'll need to use bcc to compile an 'init' program and make a root minix
filesystem. This is explained further down.</P>

<A Name="2.3"><H4>Q2.3. I get an error saying that
/usr/include/linux/vm86.h does not exist.</H4>

<P Align=Justify>Edit <TT>/usr/include/sys/vm86.h</TT> and change...</P>

<Pre>
	#include &lt;linux/vm86.h&gt;
</Pre>

<P Align=Justify>...to...</P>

<Pre>
	#include &lt;asm/vm86.h&gt;
</Pre>

<P Align=Justify>...instead.</P>

<A Name="2.4"><H4>Q2.4. How do I make an 'init' for ELKS?</H4>

<P Align=Justify>After the ELKS kernel has booted it will run /bin/init.
A real version of 'init' is being prepared for inclusion in the tiny-utils
package, also on linux.mit.edu. A very basic init and login is included in
the sysutils part of the elkscmd package which is distributed with each
release. The kernel code has recently been changed so that it loads
/bin/init instead of /bin/sh.</P>

<P Align=Justify>To install init and login compile them both with...</P>

<Pre>
	bcc -0 -O -ansi -s init.c -o init
	bcc -0 -O -ansi -s login.c -o login
</Pre>

<P Align=Justify>
<code>-0   </code> selects 8086 code generation,<BR>
<code>-O   </code> enables optimisation,<BR>
<code>-ansi</code> enables ansi-style function prototypes (only), and<BR>
<code>-s   </code> strips symbols out of the binary.</P>

<P Align=Justify>...and copy them into the /bin directory of your root
disk. The login program requires an /etc/passwd and a /etc/group file, and
a /bin/sh (or other depending on the entry in /etc/passwd.</P>

<P Align=Justify>As of kernel 0.0.56 sash now works and is being used as
/bin/sh by most people. It can be found in elkscmd.tar.gz. For best
results copy /etc/passwd and /etc/group from a standard linux distribution
onto your root disk so that ls -l works okay, and /usr/lib/liberror.txt so
that sash error reporting works.</P>

<P Align=Justify>A version of ash is also included which does work under
ELKS, but is much larger, and may not work at all on machines with
&lt;640K of memory.</P>

<A NAME="2.5"><H4>Q2.5. How do I make a root filesystem disk?</H4>

<P Align=Justify>For most people the root filesystem included in
images.zip should be ideal, and can be used to create a root disk under
Linux as follows:</P>

<Pre>
	dd if=root of=/dev/fd0 bs=8192
</Pre>

<P Align=Justify>Under DOS, RAWRITE.EXE can be used instead.</P>

<P Align=Justify>You need to create a minix floppy containing the
appropriate bits and pieces. This file should contain init, login, and sh
in /bin/ and passwd and group in /etc/, as well as three ttys for init in
/dev/.</P>

<P Align=Justify><I>Note: /dev/tty is different to normal Linux which uses
(5,0)</I></P>

<Pre>
	mkdir /usr/src/root86                   # make a directory
	cd /usr/src/root86
	mkdir dev                               # create directorys in it
	cd dev
	mknod tty1 c 4 0                        # creatye the required devices
	mknod tty2 c 4 1
	mknod tty3 c 4 2
	mknod fd0 b 3 128
	cd ..
	mkdir bin
	cd bin
	cp &lt;path-to-elkscmd-init&gt; init          # copy in essential binaries
	cp &lt;path-to-elkscmd-login&gt; login
	cp &lt;path-to-elkscmd-sash&gt; sh
	cd ..
	mkdir etc
	cd etc
	cp &lt;path-to-skeleton-passwd&gt; passwd     # add required files for login
	cp &lt;path-to-skeleton-group&gt; group
	cd ..
	fdformat /dev/fd0H1440                  # if floppy not yet formatted
	mkfs.minix -n14 /dev/fd0 1440
	mount -t minix /dev/fd0 /a              # need a mount point "/a"
	cp -pR /usr/src/root86/* /a
	umount /a
</pre>

<P Align=Justify>Some distributions use /dev/fd0u1440 instead of
/dev/fd0H1440. You should removed passwords from the passwd file as they
are not yet suported, and make sure the shell entry for each user is
/bin/sh for future compatability.</P>

<P Align=Justify>Alternatively, if you have a 2.0.x kernel and mount-2.5k,
you can use the loopback filesystem to create a disk image on your hard
disk, and then dump it to floppy:</P>

<Pre>
	dd if=/dev/zero of=root.image bs=18k count=80
	losetup /dev/loop0 root.image
	mkfs -t minix /dev/loop0 1440
	mount -t minix /dev/loop0 /a
		...
	umount /a
	dd if=root.image of=/dev/fd0
</Pre>

<P Align=Justify>As of ELKS 0.0.53 floppy sizes other than 1.44M now work.
Just follow the above intructions substituting the appropriate sizes in
where required. However, because of the way 360K disks are written by
1.2Meg drives, the instructions below must be followed if you are trying
to boot a machine with a 360K drive.</P>

<A Name="2.6"><H4>Q2.6. What if I have an XT with a 360K disk drive?</H4>

<P Align=Justify>Preparing boot and root images to run on a different
machine requires a little care, especially if the target machine has a
360K drive. 360K drives (5.25" DD) have 40-track heads, and 1.2MB (5.25"
HD) have 80-track heads. A 1.2MB drive can read 360K disks but not
reliably write them, since it will write magnetic tracks which are half
the width expected by a 360K drive.</P>

<P Align=Justify>One solution is to fit a 360K drive as the second drive
in your Linux PC - you can then format 360K disks with...</P>

<Pre>
	fdformat /dev/fd1d360
</Pre>

<P Align=Justify>...and create filesystems as usual.</P>

<P Align=Justify>Otherwise, you will need to create a floppy disk image
file, transfer it to the PC which has the 360K drive (e.g. using a serial
cable), then use "rawrite" under DOS to recreate the disk from the image
file.</P>

<H4>Boot disks</H4>

<P Align=Justify>The 'Image' file can be written to any type of floppy
disk and will boot successfully, so all you need to do is transfer the
file and use 'rawrite' to make the target disk.</P>

<P Align=Justify>Root disks are now autodetected so you no longer have to
re-compile for disk sizes other than 1.44Mb.</P>

<H4>Root disks</H4>

<P Align=Justify>You can prepare a 360K root image on a larger drive -
when you enter the mkfs command substitute '360' for the size of the
filesystem. Once you have copied the files to this disk, unmount it, then
you can create a disk image file from it:</P>

<Pre>
	dd if=/dev/fd0 of=root.image bs=1k count=360
</Pre>

<P Align=Justify>This image can then be transferred to the target and
written out using 'rawrite' as before. If you use the loopback filesystem
this step is not necessary.</P>

<H4>RAM limitations</H4>

<P Align=Justify>0.0.44 expected there to be 640K RAM available. However
if you do not have 640K the problems with DEF_INITSEG and DEF_SETUPSEG
have now been fixed in later versions so you will not have to change
anything.</P>

<A Name="2.7"><H4>Q2.7. How do a change root device of boot images?</H4>

<P Align=Justify>Version 0.0.62 boot disk was compiled to use the second
floppy drive as a root disk because the wait_for_keypress() function was
broken. You can get round this if you only have one floppy drive by using
a hex editor to change the root device no. in the image.</P>

<P Align=Justify>If you get an error about root disk mount failing on
device 03c0, load the boot image into a hex editor and look for c003h
somewhere near the start of the image and change it to 8003h. (c003h is
03c0 in Intel's backwards byte ordering). This should work for any
version, but it is not clear whether the address of the byte to edit
varies between version. <A HRef="MailTo:jose@cnct.com">jose@cnct.com</A>
reports that in 0.0.62 boot image, the two bytes are at 0adf - oade.</P>

<A Name="2.8"><H4>Q2.8. How do I install to ELKS to harddisk?</H4>

<P Align=Justify>As of version 0.0.65 it is possible to install ELKS root
disk on a harddisk and then create a boot floppy that uses this. There
still some bugs but it is more usable than a root floppy.</P>

<P Align=Justify>First create a partition with fdisk. Any version of fdisk
will be able to do this, but the current root disk only supports bd?1-4,
which are primary partitions, and if you already have a DOS primary
partition you will not be able to make a second primary partition with DOS
fdisk. The version of fdisk included on the ELKS 0.0.67 root disk is still
young code, but seems to work fine on my system.</P>

<P Align=Justify>Having created the partition, boot ELKS from boot and
root floppies, and create a filesystem using mkfs. It is safe to use ELKS
fdisk to check you know the correct device name for the partition you want
to create the filesystem on. To create the filesystem type...</P>

<Pre>
	mkfs /dev/bd?? &lt;size&gt;
</Pre>

<P Align=Justify>...where bd?? is the correct partition, and size is the
size of the partition in Kbyte blocks. &lt;size&gt; cannot be more than
32M. E.g. To make a filesystem on the first partition on the slave disk,
which is a 20M partition type:</P>

<Pre>
	mkfs /dev/bdb1 20000
</Pre>

<P Align=Justify>Now mount the partition on the /mnt mount point by
typing...</P>

<Pre>
	mount /dev/bd?? /mnt
</Pre>

<P Align=Justify>...where <I>bd??</I> is the correct partition. The root
directory of the new partition may look a bit corrupted and it may not be
possibly to use ls from /mnt. I am not sure why mkfs is generating
slightly corrupt filesystems, but I am working on it.</P>

<P Align=Justify>Create the essential directories on the new filesystem as
follows:</P>

<Pre>
	cd /mnt
	mkdir bin dev etc home mnt root
	mkdir usr usr/lib
	mkdir var var/log var/run
	mkdir /mnt/home/user?....
</Pre>

<P Align=Justify>Now copy essential files. You will need many more than
these for a decent system but here are the essentials and some of the more
useful ones:</P>

<Pre>
	cd /bin
	cp -v cp init getty login ls mount pwd sh umount /mnt/bin/
	cd /etc
	cp -v group passwd /mnt/etc/
	cp /usr/lib/liberror.txt /mnt/usr/lib/
	touch /mnt/var/run/utmp
</Pre>

<P Align=Justify>Finally create the essentail devices:</P>

<Pre>
	cd /mnt/dev
	for N in 0 1 2 3 ; do mknod tty$N c 4 $N ; done
	mknod fd0 b 3 128
	mknod fd1 b 3 192
	for N in '' 1 2 3 4 ; do mknod bda$N b 3 $[$N+0] ; done
	for N in '' 1 2 3 4 ; do mknod bdb$N b 3 $[$N+64] ; done
	cd /
</Pre>

<P Align=Justify>Now unmount the new partition with</P>

<Pre>
	umount /dev/bd??
</Pre>

<P Align=Justify>You will now need to re-compile a new kernel with the
correct root device selected. To do this edit include/linuxmt/config.h in
the ELKS kernel sources, and changed the CONFIG_ROOTDEV from 0x380 to the
device number of the partition. The last two digits must be the minor
number of the partition in hex. The minor number can be found from the
list above in the far right column. E.g. The minor number for bdb3 is 67,
which is 43 in hex, so the ROOT_DEV value is 0x343.</P>

<P Align=Justify>When you have done this, type...</P>

<Pre>
	make disk
</Pre>

<P Align=Justify>...to build a new kernel floppy, and reboot the ELKS
machine with this new boot disk. The new root should mount, but may give a
warning, and the system come up as normal, but much faster than from
floppy. As before the root directory may be corrupted, but it should be
possible to change to other directories normally, and the system should
work otherwise normally.</P>

<A Name="2.9"><H4>Q2.9. I get errors building Dev86 on recent Linux
systems?</H4>

<P Align=Justify>There are two issues with building Dev86 on recent
systems which are known to be a problem under RedHat 6.0.</P>

<OL>

<LI><P Align=Justify>Firstly a conflict with recent glibc means that a
FILE * can no longer be initialised as pointing to standard IO. A fix is
in the works for this problem.</P>

<LI><P Align=Justify>The version of ar shipped with some Linux systems can
no longer deal with bcc format .o files. A new ar program has been written
for Dev86 and will be included in the next release. In the meantime <A
href="mailto:greg@censoft.com">Greg Haerr</A> has made the new version
available from the <A
href="ftp://microwindows.censoft.com/pub/microwindows/ar">
ftp://microwindows.censoft.com/pub/microwindows/ar</A> ftp server.</P>

</OL>

<A Name="2.10"><H4>Q2.10. I get errors building elkscmd ?</H4>

<P Align=Justify>Errors similar to the following may be experienced
building elkscmd if Dev86 was not built correctly against a recent
kernel:</P>

<Pre>
	undefined symbol: _setsid
	undefined symbol: _fchown
</Pre>

<P Align=Justify>This is caused because the Dev86 did not pick up the list
of system calls from the current kernel source. A similar problem can
occur if Dev86 does not find the kernel include directories, and build
links to them in bcc's standard include directory:</P>

<Pre>
	ps.c:2.26: error: cannot find include file linuxmt/sched.h
</Pre>

<P>The solution to both these problems is as follows:-</P>

<UL>

<LI><P Align=Justify>Make sure the line near the top of the Dev86 top
level Makefile that defines ELKSSRC points to the correct directory on
your system.</P>

<LI><P Align=Justify>Rebuild and re-install the libc portion of Dev86.</P>

<Pre>
	make library
	make install-lib
</Pre>

<LI><P ALign=Justify>Check that /usr/bcc/include/linuxmt and
/usr/bcc/include/arch are links to elks/include/linuxmt and
elks/include/arch respectively, wherever you happen to keep your kernel
source. If not, rmove the directories, and put in the links manually.</P>

<Pre>
	rm -rf /usr/bcc/include/linuxmt /usr/bcc/include/arch
	ln -s /usr/src/elks/include/linuxmt /usr/bcc/include
	ln -s /usr/src/elks/include/arch /usr/bcc/include
</Pre>

<LI><P Align=Justify>Check that linux-86/libc/syscall.dat is the same as
elks/arch/i86/kernel/syscall.dat. If not copy the version from the kernel
into place to force it, and then rebuild and re-install Dev86.</P>

<Pre>
	cd /usr/src/linux-86
	cp /usr/src/elks/arch/i86/kernel/syscall.dat libc/syscall/syscall.dat
	cp /usr/src/elks/arch/i86/kernel/syscall.dat libc/syscall/syscall.dev86
	make library
	make install-lib
</Pre>

</UL>

<P Align=Justify>elkscmd should now build correctly.</P>

<A Name="2.11"><H4>Q2.11. I get warnings building elkscmd</H4>

<P Align=Justify>Warnings similar to the following may be experienced
building elkscmd:</P>

<Pre>
	ld86: warning: _utmpname redefined in file /usr/local/bcc/lib/bcc/i86/libc.a(utnt.o); using definition in utent.o
</Pre>

<P Align=Justify>These are caused because elkscmd contains patched version
of files from the standard C library. Once these patched version have been
well tested they will be integrated into libs, and removed from Dev86.</P>

<HR Width=90%>

<A Name="3"><H3>Section 3 - Using ELKS</H3>

<A Name="3.1"><H4>Q3.1. Can I run bcc binaries under Linux?</H4>

<P Align=Justify>Yes - by loading a kernel module you can run ELKS
binaries directly. This makes development of programs to run under ELKS
much less painful, since you can test them on your normal Linux system
(although they might not work under ELKS, if your program uses a kernel
facility which is not yet implemented).</P>

<Pre>
	cd /usr/src/linux-86/elksemu
	make module
	insmod binfmt_elks.o
</Pre>

<P Align=Justify>Note that you will need to rerun the 'insmod' each
time you reboot. There are some sample bcc programs you can try in
/usr/src/linux-86/tests (such as a version of 'wc').</P>

<P Align=Justify>If when making the module you get an error saying
"modversions.h: no such file or directory" then you need to edit the
Makefile to remove the reference to this file, i.e.:</P>

<Pre>
	MODCFLAGS=-D__KERNEL__ -Wall -Wstrict-prototypes -O2 \
		-fomit-frame-pointer -fno-strength-reduce -pipe \
		-m486 -DCPU=486 -DMODULE -DMODVERSIONS
</Pre>

<A Name="3.2"><H4>Q3.2. Can I boot ELKS under DOSEMU ?</H4>

<P Align=Justify>Yes. ELKS can boot inside dosemu 0.63.1.36 running under
Linux 2.0.7, and probably other combinations as well. Make sure your
floppy drive is configured in <tt>/etc/dosemu.conf</tt>, and use the -A
flag to dos or xdos if necessary to force a floppy boot.</P>

<Pre>
	floppy { device /dev/fd0 threeinch }  
</Pre>

<HR Width=90%>

<A Name="4"><H3>Section 4 - Contributing to ELKS</H3>

<A Name="4.1"><H4>Q4.1. Can I contribute to the ELKS project ?</H4>

<P Align=Justify>Yes! Just like any other Open Source project, ELKS can
always use more volunteers. The system is quite simple relative to Linux
so even people with relatively little experience can make a useful
contribution.</P>

<P Align=Justify>ELKS is now managed using <A HRef="http://sf.net">Source
Forge</A> which is an extremely useful service offered by <A
href="http://www.valinux.com/">VA Linux</A>. In order to contribute to
ELKS you will need to register for an account on Source Forge. The ELKS
project page on Source Forge can be found <A
HRef="http://sf.net/project/elks/">here</A>.</P>

<A Name="4.2"><H4>Q4.2. What needs to be done ?</H4>

<P Align=Justify>Some idea of jobs that have been identified can be gained
by looking at the Oustanding projects, and Bugs pages on the main website.
These pages are automatically generated from the TODO and BUGS files in
the kernel source tree.</P>

<P Align=Justify>Outside of the kernel there is alot of work to be done to
put together the linux 8086 distribution which uses ELKS as its kernel.
Most of the work involves porting existing utilities to run under
ELKS.</P>

<A Name="4.3"><H4>Q4.3. What is CVS ?</H4>

<P Align=Justify>CVS is the revision control system used to manage the
source code of the elks kernel and the elkscmd package. You can use CVS
to obtain the very latest version of the source code, loook through the
revision history, and more experienced developers with accounts can use
it to commit changes they have made to the code.</P>

<P Align=Justify>ELKS CVS is now hosted on SourceForge.Net so,
for details on getting an account see the link on CVS from the
<A HRef="http://sf.net/project/elks/">ELKS project page</A>.</P>

<A Name="4.4"><H4>Q4.4. Where do I get CVS from ?</H4>

<P Align=Justify>Most distributions of Linux now include CVS, so you
should first check your distribution to determine whether it is an
optional package that hasn't yet been installed. If that is the case,
you should install that package.</P>

<P Align=Justify>The latest version of CVS can be downloaded from <A
HRef="www.cvshome.org">www.cvshome.org</A> if you need to upgrade, and
a manual for CVS is available online at the same site.</P>

<A Name="4.5"><H4>Q4.5. How do I use CVS without an account ?</H4>

<P ALign=Justify>SourceForge.Net offer full anonymous CVS services by
default. Full information can be found on the CVS page linked from the <A
HRef="http://sf.net/project/elks/">ELKS project page</A> on Source
Forge.</P>

<HR Width=90%>

<A Name="5"><H3>Section 5 - Unanswered questions</H3>

<P Align=Justify>Answers to these questions would be appreciated!</P>

<UL>

<A Name="5.1"><H4 Align=Justify>Q5.1. Can I start ELKS from DOS, like
LOADLIN.EXE does for Linux ?</H4>

<P Align=Justify><A HRef="MailTo:gabel@physik.uni-kl.de">Steffen Gabel</A>
has written a package which can do this called <A
HRef="http://www.geocities.com/SiliconValley/Lakes/4535/">BootELKS</A>,
and would very much like to hear from anyone who uses it, or has
problems.</P>

<A Name="5.2"><H4 Align=Justify>QA.2. My palmtop has a RAMdrive. Can ELKS
access it ? <I>(When/if ELKS gets an MS-DOS filesystem, that is)</I></H4>

<A Name="5.3"><H4 Align=Justify>QA.3. Can I combine the boot and root
floppies ?</H4>

<Pre>
	> From: Bar-David Yedidya <didi@math.tau.ac.il>
	> 
	> Today I managed to combine root/boot disks using LILO. It just
	> worked!
	> 
	> I created /boot on the floppy, copied Image and boot.b to it,
	> put in /etc (on the floppy) lilo.conf with this:
	>
	>       boot=/dev/fd0
	>       compact
	>       image=/boot/Image
	>               label=lin16
	>
	> did lilo -r /mnt and Hopla!
	>
	> I didn't look at the kernel sources yet to compare the boot
	> code of linux and linux-16, but I guess they act the same,
	> and that's why lilo worked.
</Pre>

<P Align=Justify>There are reports this broke under the recent ELKS
versions (>0.0.46?)</P>

<P Align=Justify><I>Note: Will this work on pre 386 machines ?</I></P>

<P ALign=Justify>Chad Page is working on a single disk system which should
be in the next version.</P>

<HR Width=90%>

<P Align=Center>This document is released under the terms of the
<A HRef="http://www.fsf.org/licenses/gpl.html">GNU General Public
Licence</A>, version 2 only.</P>

</Body>
</HTML>
